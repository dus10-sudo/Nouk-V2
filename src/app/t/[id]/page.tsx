import { addReply, getThread, listReplies } from '@/lib/api';import { revalidatePath } from 'next/cache';export const dynamic='force-dynamic';export default async function Page({params}:{params:{id:string}}){const thread=await getThread(params.id);if(!thread)return <div className='app-card p-6'>Thread not found.</div>;const {data:replies}=await listReplies(params.id);async function reply(formData:FormData){'use server';const body=String(formData.get('body')||'').slice(0,500);await addReply(thread.id,body);revalidatePath(`/t/${thread.id}`);}return(<div className='space-y-4'><div className='app-card p-6'><h1 className='text-2xl font-serif mb-1'>{thread.title}</h1><p className='text-sm opacity-70'>Expires {new Date(thread.expires_at).toLocaleString()}</p></div><div className='grid gap-3'>{replies?.map(r=>(<div key={r.id} className='app-card p-3'>{r.body}</div>))||<div className='opacity-60 text-sm'>Be the first to reply.</div>}</div><form action={reply} className='app-card p-3 flex items-center gap-3'><input name='body' placeholder='Write a replyâ€¦' required className='flex-1 px-3 py-2 rounded-lg bg-white/70 dark:bg-black/20 border border-black/10 focus-ring'/><button className='px-4 py-2 rounded-lg bg-accent text-white font-medium shadow-soft'>Send</button></form></div>);}